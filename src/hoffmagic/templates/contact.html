{% extends "base.html" %}
{# The nav links this to 'Misc', adjust title if needed #}
{% block title %}Misc / Contact | hoffmagic{% endblock %}
{% block description %}Contact information, frequently asked questions, and ways to connect.{% endblock %}

{% block content %}

<section class="contact-page">

    {# Renaming h1 to Misc to match nav link expectation #}
    <h1>Misc / Contact</h1>
            <p>
                Have a question, comment, or just want to say hello? I'd love to hear from you.
            </p>

        {# Remove complex layout, present linearly #}
            <div class="contact-form-section" style="margin-top: 3em;">
                <h2 class="text-2xl font-bold mb-6">Send a Message</h2>
                <form id="contact-form" class="space-y-6">
                     {# Inputs inherit styles from minimalist.css #}
                     <div style="margin-bottom: 1em;">
                         <label for="name" style="display: block; margin-bottom: 0.3em; font-size: 0.9em; color: var(--color-text-secondary);">Name</label>
                            <input type="text" id="name" name="name" required style="width: 100%;">
                     </div>
                    <div style="margin-bottom: 1em;">
                         <label for="email" style="display: block; margin-bottom: 0.3em; font-size: 0.9em; color: var(--color-text-secondary);">Email</label>
                            <input type="email" id="email" name="email" required style="width: 100%;">
                    </div>
                    <div style="margin-bottom: 1em;">
                         <label for="subject" style="display: block; margin-bottom: 0.3em; font-size: 0.9em; color: var(--color-text-secondary);">Subject</label>
                        <input type="text" id="subject" name="subject" required style="width: 100%;">
                    </div>
                    <div style="margin-bottom: 1em;">
                         <label for="message" style="display: block; margin-bottom: 0.3em; font-size: 0.9em; color: var(--color-text-secondary);">Message</label>
                        <textarea id="message" name="message" rows="6" required style="width: 100%; line-height: 1.6;"></textarea>
                    </div>
                    <div style="margin-top: 1.5em;">
                        <button type="submit"> {# Button inherits styles #}
                            Send Message
                        </button>
                    </div>
                </form>
                {# Simplified feedback message area - remove card styling #}
                <p id="form-feedback" style="margin-top: 1em; font-size: 0.9em;"></p>
            </div>

            <div class="contact-info-section" style="margin-top: 3em; padding-top: 2em; border-top: 1px solid var(--color-border);">
                    <h2 class="text-2xl font-bold mb-6">Contact Information</h2>
                    <div style="font-size: 1em; line-height: 1.7;">
                        <p><strong>Email:</strong> <a href="mailto:hello@hoffmagic.com">hello@hoffmagic.com</a></p>
                        <p><strong>Location:</strong> San Francisco, California</p>
                         {# Add Social Links directly if desired #}
                        <p><strong>Connect:</strong>
                             <a href="#" style="margin-right: 0.75em;">Twitter</a> |
                             <a href="#" style="margin: 0 0.75em;">LinkedIn</a> |
                             <a href="#" style="margin-left: 0.75em;">GitHub</a>
                         </p>
                            </div>

                    <div style="margin-top: 1.5em; font-size: 0.9em; color: var(--color-text-secondary);">
                            Response Time: Typically within 1-2 business days.
                        </p>
                </div>

            <div class="faq-section" style="margin-top: 3em; padding-top: 2em; border-top: 1px solid var(--color-border);">
                <h2 class="text-3xl font-serif font-bold mb-10 text-center">Frequently Asked Questions</h2>
                 <div class="space-y-6"> {# Adjust vertical spacing using simple margin #}
                 <div style="margin-bottom: 2em;">
                     <h3 style="font-weight: bold; margin-bottom: 0.5em;">Do you accept guest posts?</h3>
                     <p style="font-size: 0.95em; color: var(--color-text-secondary);">
                        Currently, I don't accept unsolicited guest posts. However, if you have a well-researched, unique perspective that aligns with the themes of this blog, feel free to reach out with a detailed pitch.
                    </p>
                 </div>
                 <div style="margin-bottom: 2em;">
                     <h3 style="font-weight: bold; margin-bottom: 0.5em;">Are you available for speaking engagements?</h3>
                     <p style="font-size: 0.95em; color: var(--color-text-secondary);">
                         Yes, I'm available for speaking at conferences, podcasts, and other events on topics related to philosophy, technology ethics, and digital well-being. Please use the contact form with details about your event.
                    </p>
                 </div>
                 <div style="margin-bottom: 2em;">
                     <h3 style="font-weight: bold; margin-bottom: 0.5em;">Can I reuse or republish your content?</h3>
                     <p style="font-size: 0.95em; color: var(--color-text-secondary);">
                         All content on this site is copyright protected. For educational use, you may quote short passages with proper attribution. For commercial use or republishing, please contact me for permission.
                    </p>
                 </div>
                 <div style="margin-bottom: 2em;">
                     <h3 style="font-weight: bold; margin-bottom: 0.5em;">How can I support your work?</h3>
                     <p style="font-size: 0.95em; color: var(--color-text-secondary);">
                        The best way to support this blog is to share articles you find valuable, subscribe to the newsletter, and engage with the content through comments. If you're interested in additional support options, please reach out.
                     </p>
                 </div>
             </div>
             </div>
</section>

{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const contactForm = document.getElementById('contact-form');
         const formFeedback = document.getElementById('form-feedback');

        contactForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            formFeedback.textContent = 'Sending...';
            formFeedback.style.color = 'var(--color-text-secondary)';

            const formData = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                subject: document.getElementById('subject').value,
                message: document.getElementById('message').value,
            };
            try {
                 // KEEP Existing email redirect logic as it was specifically coded
                // Instead of making an API call, redirect to email client
                const obfuscatedEmail = 'hoffmann' + '@' + 'poli.ufrj.br';
                const emailLink = document.createElement('a');
                emailLink.href = 'mailto:' + obfuscatedEmail +
                            '?subject=' + encodeURIComponent(formData.subject) +
                            '&body=' + encodeURIComponent('Name: ' + formData.name +
                            '\nEmail: ' + formData.email +
                            '\n\n' + formData.message);
                emailLink.style.display = 'none';
                document.body.appendChild(emailLink);
                emailLink.click();
                document.body.removeChild(emailLink);

                // Show success message and reset form
                formFeedback.textContent = 'Message prepared in your email client!';
                 formFeedback.style.color = 'var(--color-accent)';
                contactForm.reset();
                // Also try API if it exists (fallback)
                fetch('/api/contact/message', {
                   method: 'POST',
                   headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData),
                }).catch(err => console.log('API error, but email was sent:', err));
            } catch (error) {
                console.error('Error:', error);
                 formFeedback.textContent = 'Error preparing message. Please copy manually or try again.';
                 formFeedback.style.color = '#ff6b6b'; // Simple error red
            }
        });
    });
</script>
{% endblock %}
